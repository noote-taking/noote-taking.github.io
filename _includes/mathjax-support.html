<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        TeX: {
          equationNumbers: {
            autoNumber: "all"
          },
          tagSide: "right",
          tagIndent: ".8em"
        },
        showProcessingMessages: false,
        messageStyle: "none",
        skipStartupTypeset: false,
        "fast-preview": {
          disabled: true
        },
        tex2jax: {
          inlineMath: [ ['$', '$'] ],
          displayMath: [ ['$$', '$$'] ],
          processEscapes: true,
          skipTags: ['noscript', 'style', 'textarea', 'pre', 'code']
        }
    });
    </script>
<script type="text/javascript" async src="https://cdn.jsdelivr.net/npm/mathjax@2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<style>
/* 수식 블록 스타일링 */
.MathJax_Display {
    margin: 1em 0;
    display: block !important;
}
</style>
<script type="text/javascript">
  // script type="math/tex" 태그를 일반 텍스트로 변환 (MathJax 로드 전에 실행)
  (function() {
    var converted = false;
    
    function convertMathScripts() {
      if (converted) return;
      
      var mathScripts = document.querySelectorAll('script[type="math/tex"], script[type="math/tex; mode=display"]');
      if (mathScripts.length === 0) return;
      
      console.log("Converting " + mathScripts.length + " math scripts to text");
      
      // 배열로 변환 (forEach 중 DOM 변경 시 문제 방지)
      var scriptsArray = Array.prototype.slice.call(mathScripts);
      
      scriptsArray.forEach(function(script) {
        if (!script.parentNode) return;
        
        var mathText = script.textContent || script.innerText;
        var scriptType = script.getAttribute('type') || '';
        var isDisplay = scriptType.indexOf('mode=display') !== -1;
        
        // 스크립트 태그를 텍스트 노드로 교체
        var textNode = document.createTextNode(isDisplay ? '$$' + mathText + '$$' : '$' + mathText + '$');
        script.parentNode.replaceChild(textNode, script);
      });
      
      converted = true;
    }
    
    // DOM이 준비되면 즉시 변환 (MathJax 로드 전)
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', convertMathScripts);
    } else {
      convertMathScripts();
    }
  })();
</script>

