<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        TeX: {
          equationNumbers: {
            autoNumber: "all"
          },
          tagSide: "right",
          tagIndent: ".8em"
        },
        showProcessingMessages: false,
        messageStyle: "none",
        skipStartupTypeset: false,
        "fast-preview": {
          disabled: true
        },
        tex2jax: {
        inlineMath: [ ['$', '$'] ],
        displayMath: [ ['$$', '$$'] ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
    </script>
<script type="text/javascript">
  // MathJax를 동적으로 로드하여 GitHub Pages에서도 확실하게 작동하도록 함
  (function() {
    var script = document.createElement('script');
    script.type = 'text/javascript';
    script.src = 'https://cdn.jsdelivr.net/npm/mathjax@2.7.7/MathJax.js?config=TeX-MML-AM_CHTML';
    script.onload = function() {
      if (typeof MathJax !== 'undefined' && MathJax.Hub) {
        MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
      }
    };
    script.onerror = function() {
      // 첫 번째 CDN 실패 시 대체 CDN 시도
      var fallbackScript = document.createElement('script');
      fallbackScript.type = 'text/javascript';
      fallbackScript.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML';
      fallbackScript.onload = function() {
        if (typeof MathJax !== 'undefined' && MathJax.Hub) {
          MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
        }
      };
      document.head.appendChild(fallbackScript);
    };
    document.head.appendChild(script);
  })();
</script>
<script type="text/javascript">
  // 페이지 로드 후에도 MathJax가 작동하도록 보장
  window.addEventListener("load", function() {
    setTimeout(function() {
      if (typeof MathJax !== 'undefined' && MathJax.Hub) {
        MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
      } else {
        var retries = 0;
        var maxRetries = 50;
        var checkInterval = setInterval(function() {
          retries++;
          if (typeof MathJax !== 'undefined' && MathJax.Hub && MathJax.Hub.queue) {
            MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            clearInterval(checkInterval);
          } else if (retries >= maxRetries) {
            clearInterval(checkInterval);
          }
        }, 200);
      }
    }, 500);
  });
</script>
<style>
/* MathJax script 태그 숨기기 */
script[type="math/tex"],
script[type="math/tex; mode=display"] {
    display: none !important;
}
/* 수식 블록 스타일링 */
.MathJax_Display {
    margin: 1em 0;
    display: block !important;
}
/* 수식이 렌더링되기 전 공간 확보 - script 태그가 있는 부모 요소 */
script[type="math/tex; mode=display"] {
    display: block !important;
    /* min-height: 1em; */
    visibility: hidden;
}
</style>

